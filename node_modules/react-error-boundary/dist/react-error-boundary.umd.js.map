{"version":3,"file":"react-error-boundary.umd.js","sources":["../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../src/index.js"],"sourcesContent":["export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import React from 'react'\n\nconst changedArray = (a = [], b = []) =>\n  a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))\n\nconst initialState = {error: null, info: null}\nclass ErrorBoundary extends React.Component {\n  static getDerivedStateFromError(error) {\n    return {error}\n  }\n\n  state = initialState\n  resetErrorBoundary = (...args) => {\n    this.props.onReset?.(...args)\n    this.setState(initialState)\n  }\n\n  componentDidCatch(error, info) {\n    this.props.onError?.(error, info?.componentStack)\n    this.setState({info})\n  }\n\n  componentDidUpdate(prevProps) {\n    const {error, info} = this.state\n    const {resetKeys} = this.props\n    if (\n      error !== null &&\n      info !== null &&\n      changedArray(prevProps.resetKeys, resetKeys)\n    ) {\n      this.props.onResetKeysChange?.(prevProps.resetKeys, resetKeys)\n      this.setState(initialState)\n    }\n  }\n\n  render() {\n    const {error, info} = this.state\n    const {fallbackRender, FallbackComponent, fallback} = this.props\n\n    if (error !== null) {\n      // we'll get a re-render with the error state in getDerivedStateFromError\n      // but we don't have the info yet, so just render null\n      // note that this won't be committed to the DOM thanks to our componentDidCatch\n      // so the user won't see a flash of nothing, so this works fine.\n      // the benefit of doing things this way rather than just putting both the\n      // error and info setState within componentDidCatch is we avoid re-rendering\n      // busted stuff: https://github.com/bvaughn/react-error-boundary/issues/66\n      if (!info) return null\n\n      const props = {\n        componentStack: info?.componentStack,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary,\n      }\n      if (React.isValidElement(fallback)) {\n        return fallback\n      } else if (typeof fallbackRender === 'function') {\n        return fallbackRender(props)\n      } else if (FallbackComponent) {\n        return <FallbackComponent {...props} />\n      } else {\n        throw new Error(\n          'react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop',\n        )\n      }\n    }\n\n    return this.props.children\n  }\n}\n\nfunction withErrorBoundary(Component, errorBoundaryProps) {\n  function Wrapped(props) {\n    return (\n      <ErrorBoundary {...errorBoundaryProps}>\n        <Component {...props} />\n      </ErrorBoundary>\n    )\n  }\n\n  // Format for display in DevTools\n  const name = Component.displayName || Component.name || 'Unknown'\n  Wrapped.displayName = `withErrorBoundary(${name})`\n\n  return Wrapped\n}\n\nfunction useErrorHandler(givenError) {\n  const [error, setError] = React.useState(null)\n  if (givenError) throw givenError\n  if (error) throw error\n  return setError\n}\n\nexport {ErrorBoundary, withErrorBoundary, useErrorHandler}\n"],"names":["_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","changedArray","a","b","length","some","item","index","is","initialState","error","info","ErrorBoundary","state","resetErrorBoundary","args","props","onReset","setState","getDerivedStateFromError","componentDidCatch","onError","componentStack","componentDidUpdate","prevProps","resetKeys","onResetKeysChange","render","fallbackRender","FallbackComponent","fallback","React","isValidElement","Error","children","Component","withErrorBoundary","errorBoundaryProps","Wrapped","name","displayName","useErrorHandler","givenError","useState","setError"],"mappings":";;;;;;;;;;EAAe,SAASA,cAAT,CAAwBC,QAAxB,EAAkCC,UAAlC,EAA8C;EAC3DD,EAAAA,QAAQ,CAACE,SAAT,GAAqBC,MAAM,CAACC,MAAP,CAAcH,UAAU,CAACC,SAAzB,CAArB;EACAF,EAAAA,QAAQ,CAACE,SAAT,CAAmBG,WAAnB,GAAiCL,QAAjC;EACAA,EAAAA,QAAQ,CAACM,SAAT,GAAqBL,UAArB;EACD;;ECFD,IAAMM,YAAY,GAAG,UAACC,CAAD,EAASC,CAAT;EAAA,MAACD,CAAD;EAACA,IAAAA,CAAD,GAAK,EAAL;EAAA;;EAAA,MAASC,CAAT;EAASA,IAAAA,CAAT,GAAa,EAAb;EAAA;;EAAA,SACnBD,CAAC,CAACE,MAAF,KAAaD,CAAC,CAACC,MAAf,IAAyBF,CAAC,CAACG,IAAF,CAAO,UAACC,IAAD,EAAOC,KAAP;EAAA,WAAiB,CAACV,MAAM,CAACW,EAAP,CAAUF,IAAV,EAAgBH,CAAC,CAACI,KAAD,CAAjB,CAAlB;EAAA,GAAP,CADN;EAAA,CAArB;;EAGA,IAAME,YAAY,GAAG;EAACC,EAAAA,KAAK,EAAE,IAAR;EAAcC,EAAAA,IAAI,EAAE;EAApB,CAArB;;MACMC;;;;;;;;;;;YAKJC,QAAQJ;;YACRK,qBAAqB,YAAa;EAAA;;EAAA,yCAATC,IAAS;EAATA,QAAAA,IAAS;EAAA;;EAChC,YAAKC,KAAL,CAAWC,OAAX,yCAAKD,KAAL,EAAWC,OAAX,oBAAwBF,IAAxB;;EACA,YAAKG,QAAL,CAAcT,YAAd;EACD;;;;;kBARMU,2BAAP,kCAAgCT,KAAhC,EAAuC;EACrC,WAAO;EAACA,MAAAA,KAAK,EAALA;EAAD,KAAP;EACD;;;;WAQDU,oBAAA,2BAAkBV,KAAlB,EAAyBC,IAAzB,EAA+B;EAAA;;EAC7B,gDAAKK,KAAL,EAAWK,OAAX,4DAAqBX,KAArB,EAA4BC,IAA5B,oBAA4BA,IAAI,CAAEW,cAAlC;EACA,SAAKJ,QAAL,CAAc;EAACP,MAAAA,IAAI,EAAJA;EAAD,KAAd;EACD;;WAEDY,qBAAA,4BAAmBC,SAAnB,EAA8B;EAAA,sBACN,KAAKX,KADC;EAAA,QACrBH,KADqB,eACrBA,KADqB;EAAA,QACdC,IADc,eACdA,IADc;EAAA,QAErBc,SAFqB,GAER,KAAKT,KAFG,CAErBS,SAFqB;;EAG5B,QACEf,KAAK,KAAK,IAAV,IACAC,IAAI,KAAK,IADT,IAEAV,YAAY,CAACuB,SAAS,CAACC,SAAX,EAAsBA,SAAtB,CAHd,EAIE;EAAA;;EACA,oDAAKT,KAAL,EAAWU,iBAAX,8DAA+BF,SAAS,CAACC,SAAzC,EAAoDA,SAApD;EACA,WAAKP,QAAL,CAAcT,YAAd;EACD;EACF;;WAEDkB,SAAA,kBAAS;EAAA,uBACe,KAAKd,KADpB;EAAA,QACAH,KADA,gBACAA,KADA;EAAA,QACOC,IADP,gBACOA,IADP;EAAA,uBAE+C,KAAKK,KAFpD;EAAA,QAEAY,cAFA,gBAEAA,cAFA;EAAA,QAEgBC,iBAFhB,gBAEgBA,iBAFhB;EAAA,QAEmCC,QAFnC,gBAEmCA,QAFnC;;EAIP,QAAIpB,KAAK,KAAK,IAAd,EAAoB;EAClB;EACA;EACA;EACA;EACA;EACA;EACA;EACA,UAAI,CAACC,IAAL,EAAW,OAAO,IAAP;EAEX,UAAMK,KAAK,GAAG;EACZM,QAAAA,cAAc,EAAEX,IAAF,oBAAEA,IAAI,CAAEW,cADV;EAEZZ,QAAAA,KAAK,EAALA,KAFY;EAGZI,QAAAA,kBAAkB,EAAE,KAAKA;EAHb,OAAd;;EAKA,wBAAIiB,yBAAK,CAACC,cAAN,CAAqBF,QAArB,CAAJ,EAAoC;EAClC,eAAOA,QAAP;EACD,OAFD,MAEO,IAAI,OAAOF,cAAP,KAA0B,UAA9B,EAA0C;EAC/C,eAAOA,cAAc,CAACZ,KAAD,CAArB;EACD,OAFM,MAEA,IAAIa,iBAAJ,EAAuB;EAC5B,4BAAOE,wCAAC,iBAAD,EAAuBf,KAAvB,CAAP;EACD,OAFM,MAEA;EACL,cAAM,IAAIiB,KAAJ,CACJ,4FADI,CAAN;EAGD;EACF;;EAED,WAAO,KAAKjB,KAAL,CAAWkB,QAAlB;EACD;;;IA9DyBH,yBAAK,CAACI;;EAiElC,SAASC,iBAAT,CAA2BD,SAA3B,EAAsCE,kBAAtC,EAA0D;EACxD,WAASC,OAAT,CAAiBtB,KAAjB,EAAwB;EACtB,wBACEe,wCAAC,aAAD,EAAmBM,kBAAnB,eACEN,wCAAC,SAAD,EAAef,KAAf,CADF,CADF;EAKD,GAPuD;;;EAUxD,MAAMuB,IAAI,GAAGJ,SAAS,CAACK,WAAV,IAAyBL,SAAS,CAACI,IAAnC,IAA2C,SAAxD;EACAD,EAAAA,OAAO,CAACE,WAAR,0BAA2CD,IAA3C;EAEA,SAAOD,OAAP;EACD;;EAED,SAASG,eAAT,CAAyBC,UAAzB,EAAqC;EAAA,wBACTX,yBAAK,CAACY,QAAN,CAAe,IAAf,CADS;EAAA,MAC5BjC,KAD4B;EAAA,MACrBkC,QADqB;;EAEnC,MAAIF,UAAJ,EAAgB,MAAMA,UAAN;EAChB,MAAIhC,KAAJ,EAAW,MAAMA,KAAN;EACX,SAAOkC,QAAP;EACD;;;;;;;;;;;;;;"}