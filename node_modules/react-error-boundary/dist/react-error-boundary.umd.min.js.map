{"version":3,"file":"react-error-boundary.umd.min.js","sources":["../src/index.js","../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"],"sourcesContent":["import React from 'react'\n\nconst changedArray = (a = [], b = []) =>\n  a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))\n\nconst initialState = {error: null, info: null}\nclass ErrorBoundary extends React.Component {\n  static getDerivedStateFromError(error) {\n    return {error}\n  }\n\n  state = initialState\n  resetErrorBoundary = (...args) => {\n    this.props.onReset?.(...args)\n    this.setState(initialState)\n  }\n\n  componentDidCatch(error, info) {\n    this.props.onError?.(error, info?.componentStack)\n    this.setState({info})\n  }\n\n  componentDidUpdate(prevProps) {\n    const {error, info} = this.state\n    const {resetKeys} = this.props\n    if (\n      error !== null &&\n      info !== null &&\n      changedArray(prevProps.resetKeys, resetKeys)\n    ) {\n      this.props.onResetKeysChange?.(prevProps.resetKeys, resetKeys)\n      this.setState(initialState)\n    }\n  }\n\n  render() {\n    const {error, info} = this.state\n    const {fallbackRender, FallbackComponent, fallback} = this.props\n\n    if (error !== null) {\n      // we'll get a re-render with the error state in getDerivedStateFromError\n      // but we don't have the info yet, so just render null\n      // note that this won't be committed to the DOM thanks to our componentDidCatch\n      // so the user won't see a flash of nothing, so this works fine.\n      // the benefit of doing things this way rather than just putting both the\n      // error and info setState within componentDidCatch is we avoid re-rendering\n      // busted stuff: https://github.com/bvaughn/react-error-boundary/issues/66\n      if (!info) return null\n\n      const props = {\n        componentStack: info?.componentStack,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary,\n      }\n      if (React.isValidElement(fallback)) {\n        return fallback\n      } else if (typeof fallbackRender === 'function') {\n        return fallbackRender(props)\n      } else if (FallbackComponent) {\n        return <FallbackComponent {...props} />\n      } else {\n        throw new Error(\n          'react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop',\n        )\n      }\n    }\n\n    return this.props.children\n  }\n}\n\nfunction withErrorBoundary(Component, errorBoundaryProps) {\n  function Wrapped(props) {\n    return (\n      <ErrorBoundary {...errorBoundaryProps}>\n        <Component {...props} />\n      </ErrorBoundary>\n    )\n  }\n\n  // Format for display in DevTools\n  const name = Component.displayName || Component.name || 'Unknown'\n  Wrapped.displayName = `withErrorBoundary(${name})`\n\n  return Wrapped\n}\n\nfunction useErrorHandler(givenError) {\n  const [error, setError] = React.useState(null)\n  if (givenError) throw givenError\n  if (error) throw error\n  return setError\n}\n\nexport {ErrorBoundary, withErrorBoundary, useErrorHandler}\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}"],"names":["initialState","error","info","ErrorBoundary","subClass","superClass","state","resetErrorBoundary","args","props","onReset","setState","prototype","Object","create","constructor","__proto__","getDerivedStateFromError","componentDidCatch","onError","componentStack","componentDidUpdate","prevProps","a","b","this","resetKeys","length","some","item","index","is","onResetKeysChange","render","fallbackRender","FallbackComponent","fallback","React","isValidElement","Error","children","Component","givenError","useState","setError","errorBoundaryProps","Wrapped","name","displayName"],"mappings":"gXAEA,IAGMA,EAAe,CAACC,MAAO,KAAMC,KAAM,MACnCC,cCNS,IAAwBC,EAAUC,0IDW/CC,MAAQN,IACRO,mBAAqB,wCAAIC,2BAAAA,0BAClBC,MAAMC,cAAND,OAAMC,gBAAaF,KACnBG,SAASX,MCd+BK,KAAVD,KAC5BQ,UAAYC,OAAOC,OAAOT,EAAWO,WAC9CR,EAASQ,UAAUG,YAAcX,EACjCA,EAASY,UAAYX,IDIdY,yBAAP,SAAgChB,SACvB,CAACA,MAAAA,+BASViB,kBAAA,SAAkBjB,EAAOC,4BAClBO,OAAMU,mBAAUlB,QAAOC,SAAAA,EAAMkB,qBAC7BT,SAAS,CAACT,KAAAA,OAGjBmB,mBAAA,SAAmBC,WApBCC,EAAQC,IAqBJC,KAAKnB,MAApBL,IAAAA,MAAOC,IAAAA,KACPwB,EAAaD,KAAKhB,MAAlBiB,UAEK,OAAVzB,GACS,OAATC,cAzBgBqB,EA0BHD,EAAUI,aA1BPH,EAAI,cAAIC,EA0BUE,KA1BVF,EAAI,IAChCD,EAAEI,SAAWH,EAAEG,QAAUJ,EAAEK,MAAK,SAACC,EAAMC,UAAWjB,OAAOkB,GAAGF,EAAML,EAAEM,2BA2B3DrB,OAAMuB,6BAAoBV,EAAUI,UAAWA,QAC/Cf,SAASX,OAIlBiC,OAAA,iBACwBR,KAAKnB,MAApBL,IAAAA,MAAOC,IAAAA,OACwCuB,KAAKhB,MAApDyB,IAAAA,eAAgBC,IAAAA,kBAAmBC,IAAAA,YAE5B,OAAVnC,EAAgB,KAQbC,EAAM,OAAO,SAEZO,EAAQ,CACZW,qBAAgBlB,SAAAA,EAAMkB,eACtBnB,MAAAA,EACAM,mBAAoBkB,KAAKlB,uBAEvB8B,UAAMC,eAAeF,UAChBA,EACF,GAA8B,mBAAnBF,SACTA,EAAezB,GACjB,GAAI0B,SACFE,wBAACF,EAAsB1B,SAExB,IAAI8B,MACR,qGAKCd,KAAKhB,MAAM+B,aA7DMH,UAAMI,+CAiFlC,SAAyBC,SACGL,UAAMM,SAAS,MAAlC1C,OAAO2C,UACVF,EAAY,MAAMA,KAClBzC,EAAO,MAAMA,SACV2C,uBApBT,SAA2BH,EAAWI,YAC3BC,EAAQrC,UAEb4B,wBAAClC,EAAkB0C,EACjBR,wBAACI,EAAchC,QAMfsC,EAAON,EAAUO,aAAeP,EAAUM,MAAQ,iBACxDD,EAAQE,iCAAmCD,MAEpCD"}